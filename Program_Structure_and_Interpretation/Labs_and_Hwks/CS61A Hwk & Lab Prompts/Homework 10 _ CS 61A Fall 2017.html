<!DOCTYPE html>
<!-- saved from url=(0026)https://cs61a.org/hw/hw10/ -->
<html lang="en" class="gr__cs61a_org"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="John DeNero, Paul Hilfinger">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 10 _ CS 61A Fall 2017_files/jquery.min.js.download"></script>
    <script src="./Homework 10 _ CS 61A Fall 2017_files/bootstrap.min.js.download"></script>
    <script src="./Homework 10 _ CS 61A Fall 2017_files/highlight.min.js.download"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="./Homework 10 _ CS 61A Fall 2017_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 10 _ CS 61A Fall 2017_files/css">
    <link rel="stylesheet" href="./Homework 10 _ CS 61A Fall 2017_files/style.css">
    <link rel="stylesheet" href="./Homework 10 _ CS 61A Fall 2017_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 10 _ CS 61A Fall 2017_files/hw.css">


    <title>
Homework 10 | CS 61A Fall 2017
</title>
  </head>

  <body id="index" class="home" data-gr-c-s-loaded="true">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">CS 61A</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
            <li><a href="https://cs61a.org/resources.html">Resources</a></li>
            <li><a href="https://cs61a.org/articles/about.html">Policies</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
            <li><a href="https://piazza.com/berkeley/fall2017/cs61a" target="_blank">Piazza</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Homework 10

        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/hw10/hw10.zip" class="label label-outline">hw10.zip</a></li>
        </ul>
        
      </h1>
    </header>
    
<p><em>Due by 11:59pm on Friday, 11/3</em></p>




<h2>Instructions</h2>

<p>Download <a href="https://cs61a.org/hw/hw10/hw10.zip">hw10.zip</a>.</p>

<blockquote><p>Our course uses a custom version of Scheme (which you will build for Project
4) included in the starter ZIP archive. To start the interpreter, type
<code>python3 scheme</code>. To run a Scheme program interactively, type <code>python3 scheme
-i &lt;file.scm&gt;</code>. To exit the Scheme interpreter, type <code>(exit)</code>.</p></blockquote>

<p><strong>Submission:</strong> When you are done, submit with
<code>python3 ok --submit</code>.
You may submit more than once before the deadline; only the final submission
will be scored. Check that you have successfully submitted your code on
<a href="https://okpy.org/">okpy.org</a>.
See <a href="https://cs61a.org/lab/lab00#submit-the-assignment">Lab 0</a>
for more instructions on submitting assignments.</p>

<p><strong>Using Ok:</strong> If you have any questions about using Ok, please
refer to <a href="https://cs61a.org/articles/using-ok.html">this guide.</a>


  </p><p><strong>Readings:</strong> You might find the following references
  useful:</p>
  <ul>
  <li><a href="https://cs61a.org/articles/scheme-spec.html">Scheme Specification</a></li>
  <li><a href="https://cs61a.org/articles/scheme-primitives.html">Scheme Primitives Reference</a></li>
  <li><a href="http://composingprograms.com/pages/29-recursive-objects.html#linked-list-class">2.9.1 - Linked Lists</a></li>
  <li><a href="http://composingprograms.com/pages/32-functional-programming.html">3.2 - Functional Programming</a></li>
</ul>




    
<h3 class="question" id="q1">Q1: How Many Dots?</h3>

<p>Implement <code>how-many-dots</code>, which takes in a nested scheme list <code>s</code> and returns
the number of dots that appear when it is displayed by the interpreter (not
counting decimal points). You may assume that <code>s</code> is a nested list that
contains only numbers.</p>

<p><em>Hints</em>: A dot appears when the second element of a pair is not a well formed
list. The procedures <code>pair?</code>, <code>null?</code>, and <code>number?</code> test whether a value is a
pair, <code>nil</code>, or a number, respectively.</p>

<solution>

<pre><code class="hljs makefile">(<span class="hljs-keyword">define</span> (how-many-dots s)
  'YOUR-CODE-HERE
)</code></pre>

</solution>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q how-many-dots -u
python3 ok -q how-many-dots</code></pre>



<blockquote><p><strong>Note:</strong> Q2 and Q3 (Substitute, Sub All) were extra lab questions from Lab 9.
You may check the solutions if you are stuck, but we highly recommend you work
through the problem on your own for practice.</p></blockquote>

<h3 class="question" id="q2">Q2: Substitute</h3>

<p>Write a procedure <code>substitute</code> that takes three arguments: a list <code>s</code>, an <code>old</code>
word, and a <code>new</code> word. It returns a list with the elements of <code>s</code>, but with
every occurrence of <code>old</code> replaced by <code>new</code>, even within sub-lists.</p>

<p><em>Hint</em>: The built-in <code>pair?</code> predicate returns True if its argument is a <code>cons</code>
pair.</p>

<p><em>Hint</em>: The <code>=</code> operator will only let you compare numbers, but using <code>equal?</code>
or <code>eq?</code> will let you compare symbols as well as numbers. For more information,
check out the
<a href="https://cs61a.org/articles/scheme-primitives.html#general">Scheme Primitives Reference</a>.</p>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q substitute -u
python3 ok -q substitute</code></pre>

<solution>

<pre><code class="hljs coffeescript">(define (substitute s old <span class="hljs-keyword">new</span>)
  <span class="hljs-string">'YOUR-CODE-HERE
)</span></code></pre>



</solution>

<h3 class="question" id="q3">Q3: Sub All</h3>

<p>Write <code>sub-all</code>, which takes a list <code>s</code>, a list of <code>old</code> words, and a
list of <code>new</code> words; the last two lists must be the same length. It returns a
list with the elements of <code>s</code>, but with each word that occurs in the second
argument replaced by the corresponding word of the third argument. You may use
<code>substitute</code> in your solution.</p>

<solution>

<pre><code class="hljs makefile">(<span class="hljs-keyword">define</span> (sub-all s olds news)
  'YOUR-CODE-HERE
)</code></pre>



</solution>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q sub-all -u
python3 ok -q sub-all</code></pre>


<h3 id="differentiation">Differentiation</h3>


<p>The following problems develop a system for
<a href="http://en.wikipedia.org/wiki/Table_of_derivatives#Elementary_rules_of_differentiation">symbolic differentiation</a>
of algebraic expressions.  The <code>derive</code> Scheme procedure takes an
algebraic expression and a variable and returns the derivative of the
expression with respect to the variable. Symbolic differentiation is of
special historical significance in Lisp. It was one of the motivating
examples behind the development of the language. Differentiating is a
recursive process that applies different rules to different kinds of
expressions.</p>

<pre><code class="hljs javascript">; derive returns the derivative <span class="hljs-keyword">of</span> EXPR <span class="hljs-keyword">with</span> respect to VAR
(define (derive expr <span class="hljs-keyword">var</span>)
  (cond ((number? expr) <span class="hljs-number">0</span>)
        ((variable? expr) (<span class="hljs-keyword">if</span> (same-variable? expr <span class="hljs-keyword">var</span>) <span class="hljs-number">1</span> <span class="hljs-number">0</span>))
        ((sum? expr) (derive-sum expr <span class="hljs-keyword">var</span>))
        ((product? expr) (derive-product expr <span class="hljs-keyword">var</span>))
        ((exp? expr) (derive-exp expr <span class="hljs-keyword">var</span>))
        (<span class="hljs-keyword">else</span> <span class="hljs-string">'Error)))</span></code></pre>

<p>To implement the system, we will use the following data abstraction.
Sums and products are lists, and they are simplified on construction:</p>

<pre><code class="hljs sql">; Variables are represented as symbols
(define (variable? x) (symbol? x))
(define (same-variable? v1 v2)
  (and (variable? v1) (variable? v2) (eq? v1 v2)))

; Numbers are compared with =
(define (=number? expr num)
  (and (number? expr) (= expr num)))

; Sums are represented as lists that <span class="hljs-keyword">start</span> <span class="hljs-keyword">with</span> +.
(<span class="hljs-keyword">define</span> (make-<span class="hljs-keyword">sum</span> a1 a2)
  (cond ((=<span class="hljs-built_in">number</span>? a1 <span class="hljs-number">0</span>) a2)
        ((=<span class="hljs-built_in">number</span>? a2 <span class="hljs-number">0</span>) a1)
        ((<span class="hljs-keyword">and</span> (<span class="hljs-built_in">number</span>? a1) (<span class="hljs-built_in">number</span>? a2)) (+ a1 a2))
        (<span class="hljs-keyword">else</span> (<span class="hljs-keyword">list</span> <span class="hljs-string">'+ a1 a2))))
(define (sum? x)
  (and (list? x) (eq? (car x) '</span>+)))
(<span class="hljs-keyword">define</span> (addend s) (cadr s))
(<span class="hljs-keyword">define</span> (augend s) (caddr s))

; Products are represented as lists that <span class="hljs-keyword">start</span> <span class="hljs-keyword">with</span> *.
(<span class="hljs-keyword">define</span> (make-product m1 m2)
  (cond ((<span class="hljs-keyword">or</span> (=<span class="hljs-built_in">number</span>? m1 <span class="hljs-number">0</span>) (=<span class="hljs-built_in">number</span>? m2 <span class="hljs-number">0</span>)) <span class="hljs-number">0</span>)
        ((=<span class="hljs-built_in">number</span>? m1 <span class="hljs-number">1</span>) m2)
        ((=<span class="hljs-built_in">number</span>? m2 <span class="hljs-number">1</span>) m1)
        ((<span class="hljs-keyword">and</span> (<span class="hljs-built_in">number</span>? m1) (<span class="hljs-built_in">number</span>? m2)) (* m1 m2))
        (<span class="hljs-keyword">else</span> (<span class="hljs-keyword">list</span> <span class="hljs-string">'* m1 m2))))
(define (product? x)
  (and (list? x) (eq? (car x) '</span>*)))
(<span class="hljs-keyword">define</span> (multiplier p) (cadr p))
(<span class="hljs-keyword">define</span> (multiplicand p) (caddr p))</code></pre>

<blockquote><p>Note that we will not test whether your solutions to this question correctly
apply the <a href="https://en.wikipedia.org/wiki/Chain_rule">chain rule</a>. For more
info, check out the <a href="https://cs61a.org/hw/hw10/#extensions">extensions</a> section.</p></blockquote>

<h3 class="question" id="q4">Q4: Derive Sum</h3>

<p>Implement <code>derive-sum</code>, a procedure that differentiates a sum by
summing the derivatives of the <code>addend</code> and <code>augend</code>.  Use data abstraction
for a sum.</p>

<pre><code class="hljs makefile">(<span class="hljs-keyword">define</span> (derive-sum expr var)
  'YOUR-CODE-HERE
)</code></pre>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q derive-sum -u
python3 ok -q derive-sum</code></pre>



<h3 class="question" id="q5">Q5: Derive Product</h3>

<p>Implement <code>derive-product</code>, which applies <a href="http://en.wikipedia.org/wiki/Product_rule">the product
rule</a> to differentiate
products.</p>

<blockquote><p>The <code>ok</code> tests expect the terms of the result in a particular order.
First, multiply the derivative of the multiplier by the multiplicand. Then,
multiply the multiplier by the derivative of the multiplicand. Sum these two
terms to form the derivative of the original product.</p></blockquote>

<pre><code class="hljs makefile">(<span class="hljs-keyword">define</span> (derive-product expr var)
  'YOUR-CODE-HERE
)</code></pre>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q derive-product -u
python3 ok -q derive-product</code></pre>



<h3 class="question" id="q6">Q6: Make Exp</h3>

<p>Implement a data abstraction for exponentiation: a <code>base</code> raised to the
power of an <code>exponent</code>. The <code>base</code> can be any expression, but assume that the
<code>exponent</code> is a non-negative integer. You can simplify the cases when
<code>exponent</code> is <code>0</code> or <code>1</code>, or when <code>base</code> is a number, by returning numbers from
the constructor <code>make-exp</code>.  In other cases, you can represent the exp as a
triple <code>(^ base exponent)</code>.</p>

<blockquote><p>You may want to use the built-in procedure <code>expt</code>, which takes two number
arguments and raises the first to the power of the second.</p></blockquote>

<pre><code class="hljs sql">; Exponentiations are represented as lists that <span class="hljs-keyword">start</span> <span class="hljs-keyword">with</span> ^.
(<span class="hljs-keyword">define</span> (make-<span class="hljs-keyword">exp</span> base exponent)
  <span class="hljs-string">'YOUR-CODE-HERE
)

(define (base exp)
  '</span>YOUR-CODE-HERE
)

(<span class="hljs-keyword">define</span> (exponent <span class="hljs-keyword">exp</span>)
  <span class="hljs-string">'YOUR-CODE-HERE
)

(define (exp? exp)
  '</span>YOUR-CODE-HERE
)

(<span class="hljs-keyword">define</span> x^<span class="hljs-number">2</span> (make-<span class="hljs-keyword">exp</span> <span class="hljs-string">'x 2))
(define x^3 (make-exp '</span>x <span class="hljs-number">3</span>))</code></pre>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q make-exp -u
python3 ok -q make-exp</code></pre>



<h3 class="question" id="q7">Q7: Derive Exp</h3>

<p>Implement <code>derive-exp</code>, which uses the <a href="http://en.wikipedia.org/wiki/Power_rule">power
rule</a> to derive exponents.</p>

<pre><code class="hljs perl">(define (derive-<span class="hljs-keyword">exp</span> <span class="hljs-keyword">exp</span> var)
  <span class="hljs-string">'YOUR-CODE-HERE
)</span></code></pre>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q derive-exp -u
python3 ok -q derive-exp</code></pre>




<h3 id="extensions">Extensions</h3>


<p>There are many ways to extend this symbolic differentiation
system. For example, you could simplify nested exponentiation expression such
as <code>(^ (^ x 3) 2)</code>, products of exponents such as <code>(* (^ x 2) (^ x 3))</code>, and
sums of products such as <code>(+ (* 2 x) (* 3 x))</code>. You could apply the <a href="https://en.wikipedia.org/wiki/Chain_rule">chain
rule</a> when deriving exponents, so that
expressions like <code>(derive '(^ (^ x y) 3) 'x)</code> are handled correctly. Enjoy!</p>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/hw10/#q1">Q1: How Many Dots?</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q2">Q2: Substitute</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q3">Q3: Sub All</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#differentiation">Differentiation</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q4">Q4: Derive Sum</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q5">Q5: Derive Product</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q6">Q6: Make Exp</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#q7">Q7: Derive Exp</a></li>
  <li><a href="https://cs61a.org/hw/hw10/#extensions">Extensions</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about.html#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>

  
</body></html>